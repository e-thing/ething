webpackJsonp([5],{"7v2d":function(t,e,n){"use strict";var r=n("tp52"),i=n("lDdF"),o=n.n(i),a={name:"ResourceQItem",components:{ResourceBatteryChip:r.a},props:{resource:{},level:{type:Number,default:0},noParent:Boolean,readonly:Boolean},data:function(){return{}},computed:{date:function(){return this.resource instanceof this.$ething.Device&&this.resource.lastSeenDate()||this.resource.modifiedDate()},createdBy:function(){return this.resource.createdBy()?this.$ething.arbo.get(this.resource.createdBy()):null},showParent:function(){return!this.noParent&&!!this.createdBy},showType:function(){return this.resource instanceof this.$ething.Device},showConnected:function(){return this.resource instanceof this.$ething.Device},showBattery:function(){return this.resource instanceof this.$ething.Device&&this.resource.hasBattery()},showSize:function(){return this.resource instanceof this.$ething.File},showLength:function(){return this.resource instanceof this.$ething.Table},showChart:function(){return this.resource instanceof this.$ething.Table&&this.resource.length()},showDownload:function(){return this.resource instanceof this.$ething.File||this.resource instanceof this.$ething.Table}},methods:{gen:function(t){return["pad","pad-"+t]},batteryIcon:function(t){return t>95?"mdi-battery":t>85?"mdi-battery-90":t>75?"mdi-battery-80":t>65?"mdi-battery-70":t>55?"mdi-battery-60":t>45?"mdi-battery-50":t>35?"mdi-battery-40":t>25?"mdi-battery-30":t>15?"mdi-battery-20":t>=0?"mdi-battery-alert":"battery unknown"},batteryColor:function(t){return t<=15?"negative":t<=40?"warning":void 0},settings:function(){this.$router.push("/resource/"+this.resource.id())},more:function(){var t=this,e=[];this.showChart&&e.push({label:"Plot chart",color:"secondary",icon:"mdi-chart-line",handler:function(){return t.chart()}}),e.push({label:"Delete",color:"negative",icon:"delete",handler:function(){return t.remove()}}),e.push({label:"Settings",icon:"settings",handler:function(){t.settings()}}),this.$q.actionSheet({title:this.resource.basename(),actions:e}).catch(function(){})},remove:function(){var t=this,e=this.resource.name(),n=[];return this.$ething.arbo.list().filter(function(e){return e.createdBy()===t.resource.id()}).length&&n.push({label:"Remove also the children resources",value:"removeChildren",color:"secondary"}),this.$q.dialog({title:"Remove",message:"Do you really want to remove definitely the "+this.resource.type()+' "'+this.resource.name()+'" ?',options:{type:"checkbox",model:[],items:n},ok:"Remove",cancel:"Cancel"}).then(function(n){t.resource.remove(-1!==n.indexOf("removeChildren")).then(function(){t.$q.notify(e+" removed !")})})},chart:function(){this.$router.push("/chart/"+this.resource.id())},download:function(){var t=this;this.resource instanceof this.$ething.File?this.$ething.request({url:this.resource.getContentUrl(),dataType:"blob"}).then(function(e){console.log(e),o.a.saveAs(e,t.resource.basename())}):this.resource instanceof this.$ething.Table&&this.$q.dialog({title:"Download "+this.resource.name(),message:"Format: ",options:{type:"radio",model:"csv",items:[{label:"CSV",value:"csv"},{label:"JSON",value:"json_pretty"}]},cancel:!0,preventClose:!0,color:"secondary"}).then(function(e){t.$ething.request({url:t.resource.getContentUrl()+"?fmt="+e,dataType:"blob"}).then(function(n){o.a.saveAs(n,t.resource.basename()+"."+("json_pretty"==e?"json":e))})})},open:function(t){this.readonly||this.$ui.open(t)}}},s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-item",{staticClass:"item",attrs:{link:!t.readonly},nativeOn:{click:function(e){t.open(t.resource)}}},[t._l(t.level,function(e){return n("div",{class:t.gen(e)})}),t._v(" "),n("q-item-side",{attrs:{icon:t.$meta.get(t.resource).icon,inverted:"",color:t.$meta.get(t.resource).color}}),t._v(" "),n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[n("span",{staticClass:"vertical-middle text-black"},[t._v(t._s(t.resource.basename()))]),t._v(" "),t.showParent?n("small",{staticClass:"parent text-faded vertical-middle",class:t.readonly?"":"cursor-pointer",on:{click:function(e){e.stopPropagation(),t.open(t.createdBy)}}},[t._v(t._s(t.createdBy.basename()))]):t._e(),t._v(" "),t.showConnected&&!t.resource.connected()?n("q-icon",{staticClass:"vertical-middle",attrs:{name:"mdi-lan-disconnect",color:"warning"}}):t._e(),t._v(" "),t.resource.public()?n("q-icon",{staticClass:"vertical-middle",attrs:{name:"share",color:"warning"}}):t._e()],1),t._v(" "),n("q-item-tile",{attrs:{sublabel:""}},[t._v(t._s(t.$ui.dateToString(t.date)))]),t._v(" "),t.showType?n("q-item-tile",{attrs:{sublabel:""}},[t._v(t._s(t.resource.type()))]):t._e(),t._v(" "),t.showBattery?n("q-item-tile",{staticClass:"lt-sm",attrs:{sublabel:""}},[t._v("battery: "+t._s(t.resource.battery())+"%")]):t._e(),t._v(" "),t.showSize?n("q-item-tile",{attrs:{sublabel:""}},[t._v(t._s(t.$ui.sizeToString(t.resource.size())))]):t._e(),t._v(" "),t.showLength?n("q-item-tile",{attrs:{sublabel:""}},[t._v(t._s(t.resource.length())+" rows")]):t._e()],1),t._v(" "),t.showBattery?n("q-item-side",{staticClass:"gt-xs",attrs:{right:""}},[n("resource-battery-chip",{attrs:{resource:t.resource}})],1):t._e(),t._v(" "),t.readonly?t._e():[t.showChart?n("q-item-side",{staticClass:"gt-xs",attrs:{right:""}},[n("q-btn",{attrs:{icon:"mdi-chart-line",round:"",flat:"",dense:"",color:"secondary"},on:{click:function(e){return e.stopPropagation(),t.chart(e)}}})],1):t._e(),t._v(" "),t.showDownload?n("q-item-side",{staticClass:"gt-xs",attrs:{right:""}},[n("q-btn",{attrs:{icon:"cloud_download",round:"",flat:"",dense:"",color:"secondary"},on:{click:function(e){return e.stopPropagation(),t.download(e)}}})],1):t._e(),t._v(" "),n("q-item-side",{staticClass:"gt-xs",attrs:{right:""}},[n("q-btn",{attrs:{icon:"delete",round:"",flat:"",dense:"",color:"negative"},on:{click:function(e){return e.stopPropagation(),t.remove(e)}}})],1),t._v(" "),n("q-item-side",{staticClass:"gt-xs",attrs:{right:""}},[n("q-btn",{attrs:{icon:"settings",round:"",flat:"",dense:""},on:{click:function(e){return e.stopPropagation(),t.settings(e)}}})],1),t._v(" "),n("q-item-side",{staticClass:"lt-sm",attrs:{right:""}},[n("q-btn",{attrs:{icon:"more_vert",round:"",flat:"",dense:""},on:{click:function(e){return e.stopPropagation(),t.more(e)}}})],1)]],2)},c=[];s._withStripped=!0;var l=n("XyMi"),u=!1;var d=function(t){u||n("dwZw")},h=Object(l.a)(a,s,c,!1,d,"data-v-400016d6",null);h.options.__file="src\\components\\ResourceQItem.vue";e.a=h.exports},BeNj:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},LGuY:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},dwZw:function(t,e,n){var r=n("vJwi");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("rjj0").default)("3bc53fb7",r,!1,{})},lDdF:function(t,e,n){var r,i=i||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=function(){return t.URL||t.webkitURL||t},n=t.document.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,i=/constructor/i.test(t.HTMLElement)||t.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},s=function(t){setTimeout(function(){"string"==typeof t?e().revokeObjectURL(t):t.remove()},4e4)},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},l=function(l,u,d){d||(l=c(l));var h,f=this,p="application/octet-stream"===l.type,m=function(){!function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(t){a(t)}}}(f,"writestart progress write writeend".split(" "))};if(f.readyState=f.INIT,r)return h=e().createObjectURL(l),void setTimeout(function(){var t,e;n.href=h,n.download=u,t=n,e=new MouseEvent("click"),t.dispatchEvent(e),m(),s(h),f.readyState=f.DONE});!function(){if((o||p&&i)&&t.FileReader){var n=new FileReader;return n.onloadend=function(){var e=o?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,f.readyState=f.DONE,m()},n.readAsDataURL(l),void(f.readyState=f.INIT)}h||(h=e().createObjectURL(l)),p?t.location.href=h:t.open(h,"_blank")||(t.location.href=h);f.readyState=f.DONE,m(),s(h)}()},u=l.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=c(t)),navigator.msSaveOrOpenBlob(t,e)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(t,e,n){return new l(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */void 0!==t&&t.exports?t.exports.saveAs=i:null!==n("LGuY")&&null!==n("nErl")&&(void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r))},nErl:function(t,e){(function(e){t.exports=e}).call(e,{})},s9rM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={name:"PageData",components:{ResourceQItem:n("7v2d").a},computed:{path:function(){return this.$route.params.path||""},resources:function(){return this.$store.getters["ething/glob"](this.path)},folders:function(){var t=this,e=this.path;e&&!/\/$/.test(e)&&(e+="/");var n=new RegExp("^"+e),r=new RegExp("^"+e+"[^/]+/");return this.$store.getters["ething/filter"](function(e){return(e instanceof t.$ething.File||e instanceof t.$ething.Table)&&r.test(e.name())}).map(function(t){return t.dirname().replace(n,"").replace(/\/.*$/,"")}).filter(function(t,e,n){return n.indexOf(t)===e})},files:function(){var t=this;return this.resources.filter(function(e){return e instanceof t.$ething.File})},tables:function(){var t=this;return this.resources.filter(function(e){return e instanceof t.$ething.Table})},pathItems:function(){var t=this.path.split("/");t.unshift("Home");var e=[],n="/data";return t.forEach(function(t,r){r&&(n+="/"+t),t&&e.push({label:t,link:n,icon:r?"":"home"})}),e}},methods:{pJoin:function(t,e){return t?/^\//.test(e)?e:(t=t.replace(/\/+$/,""))+"/"+e:e},create:function(t){this.$router.push("/create/"+t)}}},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"q-mb-xl"},[n("q-breadcrumbs",{staticClass:"q-pa-md"},t._l(t.pathItems,function(t,e){return n("q-breadcrumbs-el",{key:e,attrs:{label:t.label,icon:t.icon,to:t.link}})})),t._v(" "),t.resources.length?n("div",[n("q-list",{attrs:{link:"","no-border":""}},[t.folders.length?n("div",[n("q-list-header",{attrs:{inset:""}},[t._v("Folders")]),t._v(" "),t._l(t.folders,function(e,r){return n("q-item",{key:e,attrs:{to:t.pJoin(t.path,e),append:""}},[n("q-item-side",{attrs:{icon:"folder",inverted:"",color:"yellow"}}),t._v(" "),n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[t._v(t._s(e))])],1)],1)})],2):t._e(),t._v(" "),t.files.length?n("div",[t.folders.length?n("q-item-separator",{attrs:{inset:""}}):t._e(),t._v(" "),n("q-list-header",{attrs:{inset:""}},[t._v("Files")]),t._v(" "),t._l(t.files,function(t){return n("resource-q-item",{key:t.id(),attrs:{resource:t}})})],2):t._e(),t._v(" "),t.tables.length?n("div",[t.folders.length||t.files.length?n("q-item-separator",{attrs:{inset:""}}):t._e(),t._v(" "),n("q-list-header",{attrs:{inset:""}},[t._v("Table")]),t._v(" "),t._l(t.tables,function(t){return n("resource-q-item",{key:t.id(),attrs:{resource:t}})})],2):t._e()])],1):n("div",{staticClass:"q-pa-md"},[t._v("\n    No items found.\n  ")]),t._v(" "),n("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[n("q-fab",{attrs:{color:"primary",icon:"add",direction:"up"}},[n("q-fab-action",{attrs:{color:t.$meta.get("File").color,icon:t.$meta.get("File").icon},on:{click:function(e){t.create("File")}}}),t._v(" "),n("q-fab-action",{attrs:{color:t.$meta.get("Table").color,icon:t.$meta.get("Table").icon},on:{click:function(e){t.create("Table")}}}),t._v(" "),n("q-fab-action",{attrs:{color:t.$meta.get("File").color,icon:"mdi-chart-line"},on:{click:function(e){t.$router.push("/chart")}}})],1)],1)],1)},o=[];i._withStripped=!0;var a=n("XyMi"),s=!1;var c=function(t){s||n("x0iI")},l=Object(a.a)(r,i,o,!1,c,null,null);l.options.__file="src\\pages\\Data.vue";e.default=l.exports},tp52:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"number"==typeof t.battery?n("q-chip",{attrs:{small:"",detail:"",icon:t.batteryIcon(t.battery),color:t.batteryColor(t.battery)}},[t._v("\n  "+t._s(t.battery)+"%\n")]):t._e()},i=[];r._withStripped=!0;var o=n("XyMi"),a=Object(o.a)({name:"ResourceBatteryChip",props:{resource:{}},data:function(){return{}},computed:{battery:function(){return this.resource.battery()}},methods:{batteryIcon:function(t){return t>95?"mdi-battery":t>85?"mdi-battery-90":t>75?"mdi-battery-80":t>65?"mdi-battery-70":t>55?"mdi-battery-60":t>45?"mdi-battery-50":t>35?"mdi-battery-40":t>25?"mdi-battery-30":t>15?"mdi-battery-20":t>=0?"mdi-battery-alert":"battery unknown"},batteryColor:function(t){return t<=15?"negative":t<=40?"warning":void 0}}},r,i,!1,null,null,null);a.options.__file="src\\components\\ResourceBatteryChip.vue";e.a=a.exports},vJwi:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.parent[data-v-400016d6]:hover {\n  text-decoration: underline;\n}\n@media (max-width: 575px) {\n.item[data-v-400016d6] {\n    padding-left: 8px;\n    padding-right: 8px;\n}\n}\n.pad[data-v-400016d6]:before {\n  content: '';\n  position: absolute;\n  right: auto;\n}\n.pad[data-v-400016d6]:before {\n  border-left: 2px solid #e1bee7;\n  bottom: 0px;\n  top: 0px;\n  width: 1px;\n}\n.pad[data-v-400016d6] {\n  width: 42px;\n}\n@media (max-width: 575px) {\n.pad[data-v-400016d6] {\n    width: 28px;\n}\n}\n.pad-1[data-v-400016d6]:before {\n  left: 34px;\n}\n@media (max-width: 575px) {\n.pad-1[data-v-400016d6]:before {\n    left: 26px;\n}\n}\n.pad-2[data-v-400016d6]:before {\n  left: 76px;\n}\n@media (max-width: 575px) {\n.pad-2[data-v-400016d6]:before {\n    left: 54px;\n}\n}\n.pad-3[data-v-400016d6]:before {\n  left: 118px;\n}\n@media (max-width: 575px) {\n.pad-3[data-v-400016d6]:before {\n    left: 82px;\n}\n}\n.pad-4[data-v-400016d6]:before {\n  left: 160px;\n}\n@media (max-width: 575px) {\n.pad-4[data-v-400016d6]:before {\n    left: 110px;\n}\n}\n",""])},x0iI:function(t,e,n){var r=n("BeNj");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("rjj0").default)("199f2b4b",r,!1,{})}});