webpackJsonp([9],{H4dA:function(t,n,e){var a=e("qhZ6");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,e("rjj0").default)("6ad1afb5",a,!1,{})},PHKz:function(t,n,e){var a=e("pUjk");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,e("rjj0").default)("4ba5c8eb",a,!1,{})},pUjk:function(t,n,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},qhZ6:function(t,n,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.log[data-v-ac65d0ae]:hover {\n  background-color: #f5f5f5;\n}\n.log.debug[data-v-ac65d0ae] {\n  color: #555;\n}\n.log.info[data-v-ac65d0ae] {\n  color: #31ccec;\n}\n.log.warning[data-v-ac65d0ae] {\n  color: #f2c037;\n}\n.log.error[data-v-ac65d0ae] {\n  color: #db2828;\n}\n.log.fatal[data-v-ac65d0ae] {\n  color: #db2828;\n}\n",""])},yYi4:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("fZjL"),s=e.n(a),i={name:"SettingsView",data:function(){var t={};for(var n in this.$meta.plugins){var e=this.$meta.plugins[n];e.schema&&(t[n]={error:!1,schema:e.schema})}return{loading:!0,saving:!1,error:!1,saveError:!1,settings:{},plugins:t,logLevels:[{label:"debug",value:"debug"},{label:"info",value:"info"},{label:"warning",value:"warning"},{label:"error",value:"error"},{label:"fatal",value:"fatal"}]}},computed:{globalError:function(){var t=this.error;if(!t)for(var n in this.plugins){this.plugins[n].error&&(t=!0);break}return t}},methods:{load:function(){var t=this;this.loading=!0,this.$ething.settings.get().then(function(n){for(var e in console.log(n),t.plugins)void 0===n[e]&&(n[e]={});t.settings=n,t.loading=!1})},onSave:function(){var t=this,n=this.settings;console.log(n),this.saving=!0,this.saveError=!1,this.$ething.settings.set(n).catch(function(n){t.saveError=n}).finally(function(){t.saving=!1})}},mounted:function(){this.load()}},o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return!1===t.loading?e("div",[e("div",{staticClass:"q-mt-md"},[e("div",{staticClass:"q-title q-title-opacity"},[t._v("General")]),t._v(" "),e("form-schema",{staticClass:"q-my-md",attrs:{schema:t.$meta.config},on:{error:function(n){t.error=n}},model:{value:t.settings,callback:function(n){t.settings=n},expression:"settings"}})],1),t._v(" "),t._l(t.plugins,function(n,a){return"object"==typeof n.schema?e("div",{key:a,staticClass:"q-mt-md"},[e("div",{staticClass:"q-title q-title-opacity"},[t._v(t._s(a))]),t._v(" "),e("form-schema",{staticClass:"q-my-md",attrs:{schema:n.schema},on:{error:function(t){n.error=t}},model:{value:t.settings[a],callback:function(n){t.$set(t.settings,a,n)},expression:"settings[name]"}})],1):t._e()}),t._v(" "),t.saveError?e("q-alert",{staticClass:"q-mt-md",attrs:{type:"negative"}},[t._v("\n    "+t._s(String(t.saveError))+"\n  ")]):t._e(),t._v(" "),e("div",{staticClass:"q-mt-md"},[e("q-btn",{attrs:{disable:t.globalError,loading:t.saving,color:"secondary",icon:"done",label:"save changes"},on:{click:t.onSave}})],1)],2):e("div",[t._v("loading ...")])},l=[];o._withStripped=!0;var r=e("XyMi"),c=Object(r.a)(i,o,l,!1,null,null,null);c.options.__file="src\\components\\SettingsView.vue";var v=c.exports,d={name:"LogView",data:function(){return{loading:!0,logs:[],filter:"",length:100,lengthOptions:[100,200,500,1e3].map(function(t){return{label:String(t),value:t}})}},methods:{load:function(){var t=this;this.loading=!0,this.$ething.request({url:"utils/read_log?line="+this.length+"&filter="+encodeURIComponent(this.filter),dataType:"json"}).then(function(n){t.logs=n.map(function(t){var n=t.split("::",4);if(4==n.length){var e=n[0].trim(),a=n[1].trim(),s=n[2].trim().toUpperCase(),i=n[3].trim();return{date:e,name:a,level:s,cls:s.toLowerCase(),message:i}}}).filter(function(t){return!!t}).reverse()}).finally(function(){t.loading=!1})}},mounted:function(){this.load()}},u=function(){var t=this,n=t.$createElement,e=t._self._c||n;return!1===t.loading?e("div",[e("q-input",{staticClass:"inline",attrs:{placeholder:"filter"},model:{value:t.filter,callback:function(n){t.filter=n},expression:"filter"}}),t._v(" "),e("q-select",{staticClass:"inline",attrs:{options:t.lengthOptions,suffix:"results"},model:{value:t.length,callback:function(n){t.length=n},expression:"length"}}),t._v(" "),e("q-btn",{attrs:{color:"primary",flat:"",icon:"refresh",label:"refresh"},on:{click:t.load}}),t._v(" "),e("div",{staticClass:"column gutter-y-xs q-mt-sm"},t._l(t.logs,function(n,a){return e("div",{staticClass:"log row gutter-x-xs",class:n.cls,attrs:{keys:a}},[e("div",{staticClass:"date col-md-auto col-sm-4 text-faded"},[t._v("\n        "+t._s(n.date)+"\n      ")]),t._v(" "),e("div",{staticClass:"level col-md-1 col-sm-4 text-faded"},[t._v("\n        "+t._s(n.level)+"\n      ")]),t._v(" "),e("div",{staticClass:"level col-md-2 col-sm-4 text-faded"},[t._v("\n        "+t._s(n.name)+"\n      ")]),t._v(" "),e("div",{staticClass:"message col-md col-sm-12"},[t._v("\n        "+t._s(n.message)+"\n      ")])])}))],1):e("div",[t._v("loading ...")])},g=[];u._withStripped=!0;var f=!1;var _=function(t){f||e("H4dA")},m=Object(r.a)(d,u,g,!1,_,"data-v-ac65d0ae",null);m.options.__file="src\\components\\LogView.vue";var p={name:"PageSettings",components:{SettingsView:v,LogView:m.exports},data:function(){return{plugins:s()(this.$meta.plugins).join(", ")}}},h=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("q-page",[e("q-tabs",{attrs:{"two-lines":"","no-pane-border":"",color:"secondary"}},[e("q-tab",{attrs:{slot:"title",default:"",label:"settings",name:"settings",icon:"settings"},slot:"title"}),t._v(" "),e("q-tab",{attrs:{slot:"title",label:"log",name:"log",icon:"message"},slot:"title"}),t._v(" "),e("q-tab",{attrs:{slot:"title",label:"about",name:"about",icon:"info"},slot:"title"}),t._v(" "),e("q-tab-pane",{attrs:{name:"settings"}},[e("settings-view")],1),t._v(" "),e("q-tab-pane",{attrs:{name:"log"}},[e("log-view")],1),t._v(" "),e("q-tab-pane",{attrs:{name:"about"}},[e("dl",{staticClass:"horizontal"},[e("dt",[t._v("UI")]),t._v(" "),e("dd",[t._v("version: "+t._s(t.$ui.VERSION))]),t._v(" "),e("dt",[t._v("Server")]),t._v(" "),e("dd",[t._v("version: "+t._s(t.$meta.info.VERSION))]),t._v(" "),e("dt",[t._v("JS api")]),t._v(" "),e("dd",[t._v("version: "+t._s(t.$ething.VERSION))]),t._v(" "),e("dt",[t._v("Python")]),t._v(" "),e("dd",[t._v("version: "+t._s(t.$meta.info.python.version)+" type: "+t._s(t.$meta.info.python.type))]),t._v(" "),e("dt",[t._v("Platform")]),t._v(" "),e("dd",[t._v(t._s(t.$meta.info.platform.name))]),t._v(" "),e("dt",[t._v("NodeJS")]),t._v(" "),e("dd",[t._v("version: "+t._s(t.$meta.info.nodejs.version))]),t._v(" "),e("dt",[t._v("Plugins")]),t._v(" "),e("dd",[t._v(t._s(t.plugins))])])])],1)],1)},b=[];h._withStripped=!0;var q=!1;var y=function(t){q||e("PHKz")},C=Object(r.a)(p,h,b,!1,y,null,null);C.options.__file="src\\pages\\Settings.vue";n.default=C.exports}});