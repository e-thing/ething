webpackJsonp([7],{H4dA:function(t,e,n){var s=n("qhZ6");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,n("rjj0").default)("6ad1afb5",s,!1,{})},PHKz:function(t,e,n){var s=n("pUjk");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,n("rjj0").default)("4ba5c8eb",s,!1,{})},pUjk:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},qhZ6:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.log[data-v-ac65d0ae]:hover {\n  background-color: #f5f5f5;\n}\n.log.debug[data-v-ac65d0ae] {\n  color: #555;\n}\n.log.info[data-v-ac65d0ae] {\n  color: #31ccec;\n}\n.log.warning[data-v-ac65d0ae] {\n  color: #f2c037;\n}\n.log.error[data-v-ac65d0ae] {\n  color: #db2828;\n}\n.log.fatal[data-v-ac65d0ae] {\n  color: #db2828;\n}\n",""])},yYi4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"SettingsView",data:function(){return{loading:!0,saving:!1,error:!1,settings:{},logLevels:[{label:"debug",value:"debug"},{label:"info",value:"info"},{label:"warning",value:"warning"},{label:"error",value:"error"},{label:"fatal",value:"fatal"}]}},methods:{load:function(){var t=this;this.loading=!0,this.$ething.settings.get().then(function(e){console.log(e),e.notification.smtp||(e.notification.smtp={port:587}),t.settings=e,t.loading=!1})},onSave:function(){var t=this;console.log(this.settings),this.saving=!0,this.$ething.settings.set(this.settings).catch(function(e){t.error=e}).finally(function(){t.saving=!1})}},mounted:function(){this.load()}},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return!1===t.loading?n("div",[n("q-list",[n("q-list-header",[t._v("General")]),t._v(" "),n("q-item",{attrs:{link:"",tag:"label"}},[n("q-item-main",{attrs:{label:"Debug"}}),t._v(" "),n("q-item-side",{attrs:{right:""}},[n("q-toggle",{attrs:{color:"secondary"},model:{value:t.settings.debug,callback:function(e){t.$set(t.settings,"debug",e)},expression:"settings.debug"}})],1)],1),t._v(" "),n("q-item",[n("q-item-side",[t._v("Log Level")]),t._v(" "),n("q-item-main",[n("q-select",{staticClass:"q-ma-none full-width",attrs:{"hide-underline":"",options:t.logLevels,color:"secondary"},model:{value:t.settings.log.level,callback:function(e){t.$set(t.settings.log,"level",e)},expression:"settings.log.level"}})],1)],1)],1),t._v(" "),n("q-list",{staticClass:"q-mt-md"},[n("q-list-header",[t._v("Auth")]),t._v(" "),n("q-item",{attrs:{link:"",tag:"label"}},[n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[t._v("Local only")]),t._v(" "),n("q-item-tile",{attrs:{sublabel:""}},[t._v("\n          To restrict access to local ip only.\n        ")])],1),t._v(" "),n("q-item-side",{attrs:{right:""}},[n("q-toggle",{attrs:{color:"secondary"},model:{value:t.settings.auth.localonly,callback:function(e){t.$set(t.settings.auth,"localonly",e)},expression:"settings.auth.localonly"}})],1)],1),t._v(" "),n("q-item",[n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[t._v("Login")]),t._v(" "),n("q-input",{attrs:{color:"secondary"},model:{value:t.settings.auth.username,callback:function(e){t.$set(t.settings.auth,"username",e)},expression:"settings.auth.username"}})],1)],1),t._v(" "),n("q-item",[n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[t._v("Password")]),t._v(" "),n("q-input",{attrs:{type:"password",color:"secondary"},model:{value:t.settings.auth.password,callback:function(e){t.$set(t.settings.auth,"password",e)},expression:"settings.auth.password"}})],1)],1)],1),t._v(" "),n("q-list",{staticClass:"q-mt-md"},[n("q-list-header",[t._v("Notification")]),t._v(" "),n("q-item",[n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[t._v("Emails")]),t._v(" "),n("q-chips-input",{attrs:{placeholder:"emails",color:"secondary"},model:{value:t.settings.notification.emails,callback:function(e){t.$set(t.settings.notification,"emails",e)},expression:"settings.notification.emails"}})],1)],1),t._v(" "),n("q-item",[n("q-item-main",[n("q-list",{staticClass:"q-mt-md",attrs:{"no-border":""}},[n("q-list-header",[t._v("SMTP server")]),t._v(" "),n("q-item",[n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[t._v("Host")]),t._v(" "),n("q-input",{attrs:{placeholder:"smtp.gmail.com",color:"secondary"},model:{value:t.settings.notification.smtp.host,callback:function(e){t.$set(t.settings.notification.smtp,"host",e)},expression:"settings.notification.smtp.host"}})],1)],1),t._v(" "),n("q-item",[n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[t._v("Port")]),t._v(" "),n("q-input",{attrs:{type:"number",min:"1",max:"65535",color:"secondary"},model:{value:t.settings.notification.smtp.port,callback:function(e){t.$set(t.settings.notification.smtp,"port",e)},expression:"settings.notification.smtp.port"}})],1)],1),t._v(" "),n("q-item",[n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[t._v("User")]),t._v(" "),n("q-input",{attrs:{placeholder:"<username>@gmail.com",color:"secondary"},model:{value:t.settings.notification.smtp.user,callback:function(e){t.$set(t.settings.notification.smtp,"user",e)},expression:"settings.notification.smtp.user"}})],1)],1),t._v(" "),n("q-item",[n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[t._v("Password")]),t._v(" "),n("q-input",{attrs:{type:"password",color:"secondary"},model:{value:t.settings.notification.smtp.password,callback:function(e){t.$set(t.settings.notification.smtp,"password",e)},expression:"settings.notification.smtp.password"}})],1)],1)],1)],1)],1)],1),t._v(" "),t.error?n("q-alert",{staticClass:"q-mt-md",attrs:{type:"negative"}},[t._v("\n    "+t._s(String(t.error))+"\n  ")]):t._e(),t._v(" "),n("div",{staticClass:"q-mt-md"},[n("q-btn",{attrs:{loading:t.saving,color:"secondary",icon:"done",label:"save changes"},on:{click:t.onSave}})],1)],1):n("div",[t._v("loading ...")])},a=[];i._withStripped=!0;var o=n("XyMi"),l=Object(o.a)(s,i,a,!1,null,null,null);l.options.__file="src\\components\\SettingsView.vue";var r=l.exports,c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return!1===t.loading?n("div",[n("q-btn",{attrs:{color:"primary",flat:"",icon:"refresh",label:"refresh"},on:{click:t.load}}),t._v(" "),n("div",{staticClass:"column gutter-y-xs q-mt-sm"},t._l(t.logs,function(e,s){return n("div",{staticClass:"log row gutter-x-xs",class:e.cls,attrs:{keys:s}},[n("div",{staticClass:"date col-md-auto col-sm-6 text-faded"},[t._v("\n        "+t._s(e.date)+"\n      ")]),t._v(" "),n("div",{staticClass:"level col-md-1 col-sm-6 text-faded"},[t._v("\n        "+t._s(e.level)+"\n      ")]),t._v(" "),n("div",{staticClass:"message col-md col-sm-12"},[t._v("\n        "+t._s(e.message)+"\n      ")])])}))],1):n("div",[t._v("loading ...")])},v=[];c._withStripped=!0;var d=!1;var m=function(t){d||n("H4dA")},g=Object(o.a)({name:"LogView",data:function(){return{loading:!0,length:100,logs:[]}},methods:{load:function(){var t=this;this.loading=!0,this.$ething.request({url:"utils/read_log?line="+this.length,dataType:"json"}).then(function(e){t.logs=e.map(function(t){var e=t.split("::",3);if(3==e.length){var n=e[0].trim(),s=e[1].trim().toUpperCase(),i=e[2].trim();return{date:n,level:s,cls:s.toLowerCase(),message:i}}}).filter(function(t){return!!t}).reverse()}).finally(function(){t.loading=!1})}},mounted:function(){this.load()}},c,v,!1,m,"data-v-ac65d0ae",null);g.options.__file="src\\components\\LogView.vue";var u={name:"PageSettings",components:{SettingsView:r,LogView:g.exports}},_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[n("q-tabs",{attrs:{"two-lines":"","no-pane-border":"",color:"secondary"}},[n("q-tab",{attrs:{slot:"title",default:"",label:"settings",name:"settings",icon:"settings"},slot:"title"}),t._v(" "),n("q-tab",{attrs:{slot:"title",label:"log",name:"log",icon:"message"},slot:"title"}),t._v(" "),n("q-tab",{attrs:{slot:"title",label:"about",name:"about",icon:"info"},slot:"title"}),t._v(" "),n("q-tab-pane",{attrs:{name:"settings"}},[n("settings-view")],1),t._v(" "),n("q-tab-pane",{attrs:{name:"log"}},[n("log-view")],1),t._v(" "),n("q-tab-pane",{attrs:{name:"about"}},[n("dl",{staticClass:"horizontal"},[n("dt",[t._v("UI")]),t._v(" "),n("dd",[t._v("version: "+t._s(t.$ui.VERSION))]),t._v(" "),n("dt",[t._v("Server")]),t._v(" "),n("dd",[t._v("version: "+t._s(t.$meta.info.VERSION))]),t._v(" "),n("dt",[t._v("JS api")]),t._v(" "),n("dd",[t._v("version: "+t._s(t.$ething.VERSION))]),t._v(" "),n("dt",[t._v("Python")]),t._v(" "),n("dd",[t._v("version: "+t._s(t.$meta.info.python.version)+" type: "+t._s(t.$meta.info.python.type))]),t._v(" "),n("dt",[t._v("Platform")]),t._v(" "),n("dd",[t._v(t._s(t.$meta.info.platform.name))]),t._v(" "),n("dt",[t._v("NodeJS")]),t._v(" "),n("dd",[t._v("version: "+t._s(t.$meta.info.nodejs.version))])])])],1)],1)},p=[];_._withStripped=!0;var f=!1;var q=function(t){f||n("PHKz")},h=Object(o.a)(u,_,p,!1,q,null,null);h.options.__file="src\\pages\\Settings.vue";e.default=h.exports}});