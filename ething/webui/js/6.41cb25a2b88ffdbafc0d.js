webpackJsonp([6],{"7v2d":function(e,t,n){"use strict";var r=n("tp52"),i=n("lDdF"),o=n.n(i),a={name:"ResourceQItem",components:{ResourceBatteryChip:r.a},props:{resource:{},level:{type:Number,default:0},noParent:Boolean,readonly:Boolean},data:function(){return{}},computed:{date:function(){return this.resource instanceof this.$ething.Device&&this.resource.lastSeenDate()||this.resource.modifiedDate()},createdBy:function(){return this.resource.createdBy()?this.$ething.arbo.get(this.resource.createdBy()):null},showParent:function(){return!this.noParent&&!!this.createdBy},showType:function(){return this.resource instanceof this.$ething.Device},showConnected:function(){return this.resource instanceof this.$ething.Device},showBattery:function(){return this.resource instanceof this.$ething.Device&&this.resource.hasBattery()},showSize:function(){return this.resource instanceof this.$ething.File},showLength:function(){return this.resource instanceof this.$ething.Table},showChart:function(){return this.resource instanceof this.$ething.Table&&this.resource.length()},showDownload:function(){return this.resource instanceof this.$ething.File||this.resource instanceof this.$ething.Table}},methods:{gen:function(e){return["pad","pad-"+e]},batteryIcon:function(e){return e>95?"mdi-battery":e>85?"mdi-battery-90":e>75?"mdi-battery-80":e>65?"mdi-battery-70":e>55?"mdi-battery-60":e>45?"mdi-battery-50":e>35?"mdi-battery-40":e>25?"mdi-battery-30":e>15?"mdi-battery-20":e>=0?"mdi-battery-alert":"battery unknown"},batteryColor:function(e){return e<=15?"negative":e<=40?"warning":void 0},settings:function(){this.$router.push("/resource/"+this.resource.id())},more:function(){var e=this,t=[];this.showChart&&t.push({label:"Plot chart",color:"secondary",icon:"mdi-chart-line",handler:function(){return e.chart()}}),t.push({label:"Delete",color:"negative",icon:"delete",handler:function(){return e.remove()}}),t.push({label:"Settings",icon:"settings",handler:function(){e.settings()}}),this.$q.actionSheet({title:this.resource.basename(),actions:t}).catch(function(){})},remove:function(){var e=this,t=this.resource.name(),n=[];return this.$ething.arbo.list().filter(function(t){return t.createdBy()===e.resource.id()}).length&&n.push({label:"Remove also the children resources",value:"removeChildren",color:"secondary"}),this.$q.dialog({title:"Remove",message:"Do you really want to remove definitely the "+this.resource.type()+' "'+this.resource.name()+'" ?',options:{type:"checkbox",model:[],items:n},ok:"Remove",cancel:"Cancel"}).then(function(n){e.resource.remove(-1!==n.indexOf("removeChildren")).then(function(){e.$q.notify(t+" removed !")})})},chart:function(){this.$router.push("/chart/"+this.resource.id())},download:function(){var e=this;this.resource instanceof this.$ething.File?this.$ething.request({url:this.resource.getContentUrl(),dataType:"blob"}).then(function(t){console.log(t),o.a.saveAs(t,e.resource.basename())}):this.resource instanceof this.$ething.Table&&this.$q.dialog({title:"Download "+this.resource.name(),message:"Format: ",options:{type:"radio",model:"csv",items:[{label:"CSV",value:"csv"},{label:"JSON",value:"json_pretty"}]},cancel:!0,preventClose:!0,color:"secondary"}).then(function(t){e.$ething.request({url:e.resource.getContentUrl()+"?fmt="+t,dataType:"blob"}).then(function(n){o.a.saveAs(n,e.resource.basename()+"."+("json_pretty"==t?"json":t))})})},open:function(e){this.readonly||this.$ui.open(e)}}},s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-item",{staticClass:"item",attrs:{link:!e.readonly},nativeOn:{click:function(t){e.open(e.resource)}}},[e._l(e.level,function(t){return n("div",{class:e.gen(t)})}),e._v(" "),n("q-item-side",{attrs:{icon:e.$meta.get(e.resource).icon,inverted:"",color:e.$meta.get(e.resource).color}}),e._v(" "),n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[n("span",{staticClass:"vertical-middle text-black"},[e._v(e._s(e.resource.basename()))]),e._v(" "),e.showParent?n("small",{staticClass:"parent text-faded vertical-middle",class:e.readonly?"":"cursor-pointer",on:{click:function(t){t.stopPropagation(),e.open(e.createdBy)}}},[e._v(e._s(e.createdBy.basename()))]):e._e(),e._v(" "),e.showConnected&&!e.resource.connected()?n("q-icon",{staticClass:"vertical-middle",attrs:{name:"mdi-lan-disconnect",color:"warning"}}):e._e(),e._v(" "),e.resource.public()?n("q-icon",{staticClass:"vertical-middle",attrs:{name:"share",color:"warning"}}):e._e()],1),e._v(" "),n("q-item-tile",{attrs:{sublabel:""}},[e._v(e._s(e.$ui.dateToString(e.date)))]),e._v(" "),e.showType?n("q-item-tile",{attrs:{sublabel:""}},[e._v(e._s(e.resource.type()))]):e._e(),e._v(" "),e.showBattery?n("q-item-tile",{staticClass:"lt-sm",attrs:{sublabel:""}},[e._v("battery: "+e._s(e.resource.battery())+"%")]):e._e(),e._v(" "),e.showSize?n("q-item-tile",{attrs:{sublabel:""}},[e._v(e._s(e.$ui.sizeToString(e.resource.size())))]):e._e(),e._v(" "),e.showLength?n("q-item-tile",{attrs:{sublabel:""}},[e._v(e._s(e.resource.length())+" rows")]):e._e()],1),e._v(" "),e.showBattery?n("q-item-side",{staticClass:"gt-xs",attrs:{right:""}},[n("resource-battery-chip",{attrs:{resource:e.resource}})],1):e._e(),e._v(" "),e.readonly?e._e():[e.showChart?n("q-item-side",{staticClass:"gt-xs",attrs:{right:""}},[n("q-btn",{attrs:{icon:"mdi-chart-line",round:"",flat:"",dense:"",color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.chart(t)}}})],1):e._e(),e._v(" "),e.showDownload?n("q-item-side",{staticClass:"gt-xs",attrs:{right:""}},[n("q-btn",{attrs:{icon:"cloud_download",round:"",flat:"",dense:"",color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.download(t)}}})],1):e._e(),e._v(" "),n("q-item-side",{staticClass:"gt-xs",attrs:{right:""}},[n("q-btn",{attrs:{icon:"delete",round:"",flat:"",dense:"",color:"negative"},on:{click:function(t){return t.stopPropagation(),e.remove(t)}}})],1),e._v(" "),n("q-item-side",{staticClass:"gt-xs",attrs:{right:""}},[n("q-btn",{attrs:{icon:"settings",round:"",flat:"",dense:""},on:{click:function(t){return t.stopPropagation(),e.settings(t)}}})],1),e._v(" "),n("q-item-side",{staticClass:"lt-sm",attrs:{right:""}},[n("q-btn",{attrs:{icon:"more_vert",round:"",flat:"",dense:""},on:{click:function(t){return t.stopPropagation(),e.more(t)}}})],1)]],2)},c=[];s._withStripped=!0;var l=n("XyMi"),u=!1;var d=function(e){u||n("dwZw")},h=Object(l.a)(a,s,c,!1,d,"data-v-400016d6",null);h.options.__file="src\\components\\ResourceQItem.vue";t.a=h.exports},LGuY:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},dwZw:function(e,t,n){var r=n("vJwi");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("rjj0").default)("3bc53fb7",r,!1,{})},lDdF:function(e,t,n){var r,i=i||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=function(){return e.URL||e.webkitURL||e},n=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,i=/constructor/i.test(e.HTMLElement)||e.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},s=function(e){setTimeout(function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()},4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},l=function(l,u,d){d||(l=c(l));var h,f=this,p="application/octet-stream"===l.type,v=function(){!function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,n||e)}catch(e){a(e)}}}(f,"writestart progress write writeend".split(" "))};if(f.readyState=f.INIT,r)return h=t().createObjectURL(l),void setTimeout(function(){var e,t;n.href=h,n.download=u,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),v(),s(h),f.readyState=f.DONE});!function(){if((o||p&&i)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=o?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,f.readyState=f.DONE,v()},n.readAsDataURL(l),void(f.readyState=f.INIT)}h||(h=t().createObjectURL(l)),p?e.location.href=h:e.open(h,"_blank")||(e.location.href=h);f.readyState=f.DONE,v(),s(h)}()},u=l.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(e,t,n){return new l(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */void 0!==e&&e.exports?e.exports.saveAs=i:null!==n("LGuY")&&null!==n("nErl")&&(void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r))},nErl:function(e,t){(function(t){e.exports=t}).call(t,{})},tp52:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"number"==typeof e.battery?n("q-chip",{attrs:{small:"",detail:"",icon:e.batteryIcon(e.battery),color:e.batteryColor(e.battery)}},[e._v("\n  "+e._s(e.battery)+"%\n")]):e._e()},i=[];r._withStripped=!0;var o=n("XyMi"),a=Object(o.a)({name:"ResourceBatteryChip",props:{resource:{}},data:function(){return{}},computed:{battery:function(){return this.resource.battery()}},methods:{batteryIcon:function(e){return e>95?"mdi-battery":e>85?"mdi-battery-90":e>75?"mdi-battery-80":e>65?"mdi-battery-70":e>55?"mdi-battery-60":e>45?"mdi-battery-50":e>35?"mdi-battery-40":e>25?"mdi-battery-30":e>15?"mdi-battery-20":e>=0?"mdi-battery-alert":"battery unknown"},batteryColor:function(e){return e<=15?"negative":e<=40?"warning":void 0}}},r,i,!1,null,null,null);a.options.__file="src\\components\\ResourceBatteryChip.vue";t.a=a.exports},ujtr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("woOf"),i=n.n(r),o=n("06/4"),a=n.n(o),s={name:"PageDevices",components:{ResourceQItem:n("7v2d").a},data:function(){var e=this,t={};this.$meta.types.forEach(function(n){var r=e.$meta.get(n);if(-1!==r.inheritances.indexOf("Device")&&!r.virtual){var i=r.path||[],o=r.label||n,a=i.length>0?i[0]:"other";t[a]||(t[a]={types:[]}),t[a].types.push({label:o,type:n})}});var n=t.other,r=[];for(var o in delete t.other,t)r.push(i()({name:o},t[o]));return r.push(i()({name:"other"},n)),{categories:r}},computed:{devices:function(){var e=this;return this.$store.getters["ething/filter"](function(t){return t instanceof e.$ething.Device})},listOrdered:function(){var e=[],t=this;var n=0;function r(e){var i=[function(e){return{device:e,level:n,indent:20*n}}(e)];return n++,function(e){return t.$store.getters["ething/filter"](function(t){return t.createdBy()===e.id()&&t instanceof a.a.Device})}(e).map(function(e){i=i.concat(r(e))}),n--,i}return this.$store.getters["ething/filter"](function(e){return e instanceof a.a.Device}).filter(function(e){return!e.createdBy()}).forEach(function(t){e=e.concat(r(t))}),e}},methods:{create:function(e){this.$router.push("/create/"+e)}}},c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{attrs:{padding:""}},[n("div",{staticClass:"row justify-end"},[n("q-btn-dropdown",{attrs:{color:"primary",label:"Create",icon:"add",flat:""}},[n("q-list",{attrs:{link:""}},[e._l(e.categories,function(t){return[n("q-list-header",{attrs:{inset:""}},[e._v(e._s(t.name))]),e._v(" "),e._l(t.types,function(t){return n("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],key:t.type,nativeOn:{click:function(n){e.create(t.type)}}},[n("q-item-side",{attrs:{icon:e.$meta.get(t.type).icon,color:e.$meta.get(t.type).color}}),e._v(" "),n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[e._v(e._s(t.label))])],1)],1)})]})],2)],1)],1),e._v(" "),e.listOrdered.length?n("div",[n("q-list",{attrs:{link:"","no-border":""}},e._l(e.listOrdered,function(e,t){return n("resource-q-item",{key:t,attrs:{resource:e.device,level:e.level,"no-parent":""}})}))],1):n("div",{staticClass:"q-pa-md"},[e._v("\n  No devices installed.\n  ")])])},l=[];c._withStripped=!0;var u=n("XyMi"),d=Object(u.a)(s,c,l,!1,null,null,null);d.options.__file="src\\pages\\Devices.vue";t.default=d.exports},vJwi:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.parent[data-v-400016d6]:hover {\n  text-decoration: underline;\n}\n@media (max-width: 575px) {\n.item[data-v-400016d6] {\n    padding-left: 8px;\n    padding-right: 8px;\n}\n}\n.pad[data-v-400016d6]:before {\n  content: '';\n  position: absolute;\n  right: auto;\n}\n.pad[data-v-400016d6]:before {\n  border-left: 2px solid #e1bee7;\n  bottom: 0px;\n  top: 0px;\n  width: 1px;\n}\n.pad[data-v-400016d6] {\n  width: 42px;\n}\n@media (max-width: 575px) {\n.pad[data-v-400016d6] {\n    width: 28px;\n}\n}\n.pad-1[data-v-400016d6]:before {\n  left: 34px;\n}\n@media (max-width: 575px) {\n.pad-1[data-v-400016d6]:before {\n    left: 26px;\n}\n}\n.pad-2[data-v-400016d6]:before {\n  left: 76px;\n}\n@media (max-width: 575px) {\n.pad-2[data-v-400016d6]:before {\n    left: 54px;\n}\n}\n.pad-3[data-v-400016d6]:before {\n  left: 118px;\n}\n@media (max-width: 575px) {\n.pad-3[data-v-400016d6]:before {\n    left: 82px;\n}\n}\n.pad-4[data-v-400016d6]:before {\n  left: 160px;\n}\n@media (max-width: 575px) {\n.pad-4[data-v-400016d6]:before {\n    left: 110px;\n}\n}\n",""])}});