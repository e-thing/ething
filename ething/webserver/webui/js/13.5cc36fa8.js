(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"P+Z2":function(t,e,n){},V3UC:function(t,e,n){"use strict";var i=n("P+Z2"),a=n.n(i);a.a},xItC:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[n("q-btn-group",{attrs:{flat:""}},[n("q-btn",{attrs:{loading:t.saveLoading,label:"save",icon:"mdi-content-save-outline"},on:{click:t.save}}),n("q-btn-dropdown",{attrs:{label:t.langage}},[n("q-list",{attrs:{link:""}},t._l(t.langages,function(e,i,a){return n("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],key:i,nativeOn:{click:function(e){t.setLangage(i)}}},[n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[t._v(t._s(i))])],1)],1)}))],1)],1),n("span",{staticClass:"title text-faded",class:{dirty:t.dirty}},[t._v(t._s(t.resource.name()))]),n("codemirror",{ref:"cm",attrs:{options:t.cmOption},on:{changes:t.onChange},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)},a=[];i._withStripped=!0;n("NO8f"),n("pIFo");var o=n("4IOb"),r=n("j5TT"),s=(n("p77/"),n("+dQi"),n("ztCB"),n("25Eh"),n("jDMi"),n("ELLl"),n("a8ks"),n("cokd"),{name:"PageText",components:{codemirror:r["codemirror"]},data:function(){var t=this;return{content:"",contentDate:null,warnedContentDate:null,contentModifiedNotification:null,cmOption:{mode:"text/plain",tabSize:4,styleActiveLine:!0,lineNumbers:!0,lineWrapping:!1,foldGutter:!0,styleSelectedText:!0,matchBrackets:!0,autoCloseBrackets:!0,showCursorWhenSelecting:!0,extraKeys:{Ctrl:"autocomplete","Ctrl-S":function(){t.save()}},hintOptions:{completeSingle:!1},viewportMargin:1/0},loading:!0,saveLoading:!1,langages:{text:"text/plain",javascript:["text/javascript","application/javascript"],yaml:["text/x-yaml","application/x-yaml"],json:"application/json",python:"text/x-python"},langage:"text",dirty:!1}},computed:{resource:function(){var t=this.$route.params.id,e=this.$store.getters["ething/get"](t);return t&&t.length&&(e||this.$router.replace("/404")),e}},watch:{resource:{handler:function(t){var e=t.contentModifiedDate();this.contentDate&&e>this.contentDate&&e.getTime()!=this.warnedContentDate&&(this.warnedContentDate=e.getTime(),console.log("the content has been updated !"),this.dirty?(this.contentModifiedNotification&&(this.contentModifiedNotification(),this.contentModifiedNotification=null),this.contentModifiedNotification=o["e"].create({message:"The content of this file has changed in the server and differ from your current version !",timeout:5e4,type:"negative"})):this.reloadContent())},immediate:!0},contentDate:function(t){null===t&&this.contentModifiedNotification&&(this.contentModifiedNotification(),this.contentModifiedNotification=null)}},methods:{codemirror:function(){return this.$refs["cm"].codemirror},markClean:function(){this.dirty=!1,this.codemirror().markClean()},reloadContent:function(){var t=this;this.loading=!0,this.contentDate=null,this.resource.read(!0).then(function(e){t.setLangage(t.resource.mime()),t.content=String.fromCharCode.apply(null,new Uint8Array(e)),t.contentDate=t.resource.contentModifiedDate(),t.$nextTick(function(){t.markClean(),t.codemirror().clearHistory()})}).finally(function(){t.loading=!1})},setLangage:function(t){if(console.log("setLangage = "+t),/^[^\/]+\/[^\/]+$/.test(t))for(var e in this.langages)if(Array.isArray(this.langages[e])?-1!==this.langages[e].indexOf(t):this.langages[e]===t)return this.cmOption.mode=Array.isArray(this.langages[e])?this.langages[e][0]:t,void(this.langage=e);this.langages[t]||(t="text"),this.cmOption.mode=this.langages[t],this.langage=t},save:function(){var t=this;this.saveLoading=!0,this.contentDate=null,this.resource.write(this.content).then(function(){t.contentDate=t.resource.contentModifiedDate(),t.dirty=!1,t.markClean()}).finally(function(){t.saveLoading=!1})},onChange:function(t,e){this.dirty=!t.isClean()}},mounted:function(){this.reloadContent()}}),c=s,l=(n("V3UC"),n("KHd+")),d=Object(l["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports}}]);