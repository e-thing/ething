(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"+xwo":function(e,t,n){},0:function(e,t,n){e.exports=n("LzkT")},51:function(e,t){},"A0++":function(e,t,n){"use strict";var a=n("+xwo"),o=n.n(a);o.a},Hl11:function(e,t,n){},LzkT:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"filter",function(){return ke}),n.d(a,"get",function(){return Ce}),n.d(a,"glob",function(){return qe});var o={};n.r(o),n.d(o,"update",function(){return Ee});n("rGqo"),n("SpHO"),n("oRQL"),n("0UuB"),n("ETwY"),n("33V3"),n("Hl11"),n("fm0S");var r=n("oCYn"),i=n("6E/o"),u=n("cFFF"),c=n("IEC1"),s=n("zxLP"),l=n("Rqni"),d=n("MqH6"),p=n("8wy3"),f=n("zmdN"),h=n("SC7v"),m=n("FzGJ"),g=n("nlhR"),b=n("zEqA"),v=n("NjtJ"),Q=n("xWPs"),w=n("23sU"),S=n("wIFj"),y=n("lBN4"),R=n("UrUt"),U=n("EYBb"),x=n("HlXa"),T=n("UG+o"),k=n("kci6"),C=n("lUGP"),q=n("uNnR"),A=n("fUOT"),L=n("RjDA"),E=n("LQSR"),I=n("xgT5"),O=n("U/5N"),P=n("IG5u"),D=n("t7je"),V=n("d+Jl"),z=n("eelU"),j=n("XYut"),F=n("WTFv"),B=n("3R/W"),G=n("UlvI"),J=n("8l6w"),M=n("PVu0"),N=n("5X41"),H=n("fqDv"),Y=n("lOO/"),$=n("vJud"),_=n("2xiH"),K=n("rINx"),W=n("CVJq"),X=n("KnAT"),Z=n("74EC"),ee=n("S/Rk"),te=n("7r/T"),ne=n("aqAY"),ae=n("U/xP"),oe=n("tbgk"),re=n("wfli"),ie=n("dkar"),ue=n("ZYCo"),ce=n("OggR"),se=n("MFSH"),le=n("bduK"),de=n("k/Uo"),pe=n("YYYh"),fe=n("K9Ld"),he=n("Ezub"),me=n("Z4Cl"),ge=n("+diE"),be=n("C64U");r["default"].use(i["a"],{config:{},components:{QLayout:u["a"],QLayoutHeader:c["a"],QLayoutDrawer:s["a"],QPageContainer:l["a"],QPage:d["a"],QToolbar:p["a"],QToolbarTitle:f["a"],QBtn:h["a"],QBtnGroup:m["a"],QBtnDropdown:g["a"],QWindowResizeObservable:b["a"],QResizeObservable:v["a"],QTabs:Q["a"],QTab:w["a"],QTabPane:S["a"],QRouteTab:y["a"],QIcon:R["a"],QList:U["a"],QListHeader:x["a"],QItem:T["a"],QItemSeparator:k["a"],QItemTile:C["a"],QItemMain:q["a"],QItemSide:A["a"],QBreadcrumbs:L["a"],QBreadcrumbsEl:E["a"],QTable:I["a"],QTableColumns:O["a"],QInnerLoading:P["a"],QSpinnerOval:D["a"],QSpinnerPie:V["a"],QField:z["a"],QInput:j["a"],QSelect:F["a"],QRadio:B["a"],QCheckbox:G["a"],QColor:J["a"],QDatetime:M["a"],QChipsInput:N["a"],QAutocomplete:H["a"],QSlider:Y["a"],QToggle:$["a"],QKnob:_["a"],QCollapsible:K["a"],QModal:W["a"],QModalLayout:X["a"],QAlert:Z["a"],QChip:ee["a"],QPageSticky:te["a"],QFab:ne["a"],QFabAction:ae["a"],QPopover:oe["a"],QOptionGroup:re["a"],QCard:ie["a"],QCardTitle:ue["a"],QCardMain:ce["a"],QCardSeparator:se["a"],QCardActions:le["a"],QScrollArea:de["a"],QSearch:pe["a"]},directives:{CloseOverlay:fe["a"]},plugins:{Notify:he["a"],Dialog:me["a"],LocalStorage:ge["a"],ActionSheet:be["a"]}});var ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"q-app"}},[n("router-view")],1)},Qe=[];ve._withStripped=!0;var we={name:"App"},Se=we,ye=(n("A0++"),n("KHd+")),Re=Object(ye["a"])(Se,ve,Qe,!1,null,null,null);Re.options.__file="App.vue";var Ue=Re.exports,xe=n("L2JU"),Te={resources:[],loaded:!1},ke=(n("f3/d"),n("Oyvg"),n("dRSK"),function(e){return function(t){return e.resources.filter(t)}}),Ce=function(e){return function(t){return e.resources.find(function(e){return e.id()===t})}},qe=function(e){return function(t){var n=new RegExp("^"+(t?t+"/":"")+"[^/]+$");return e.resources.filter(function(e){return n.test(e.name())})}},Ae=n("QmqO"),Le=n.n(Ae),Ee=function(e){console.log("store resource update"),e.loaded=!0,e.resources=Le.a.arbo.list()},Ie=n("MS+v"),Oe={namespaced:!0,state:Te,getters:a,mutations:o,actions:Ie};r["default"].use(xe["a"]);var Pe=new xe["a"].Store({modules:{ething:Oe}}),De=Pe,Ve=n("jE9Z"),ze=[{path:"/",component:function(){return n.e(2).then(n.bind(null,"ez0Y"))},children:[{path:"",redirect:"dashboard"},{path:"data/:path*",name:"data",component:function(){return n.e(3).then(n.bind(null,"xjVW"))}},{path:"devices",name:"devices",component:function(){return n.e(4).then(n.bind(null,"GeLR"))}},{path:"table/:id",component:function(){return n.e(5).then(n.bind(null,"oqN7"))},meta:{back:!0}},{path:"chart/:id",component:function(){return n.e(0).then(n.bind(null,"rxuX"))},meta:{back:!0}},{path:"chart",component:function(){return n.e(0).then(n.bind(null,"rxuX"))}},{path:"text/:id",component:function(){return n.e(6).then(n.bind(null,"xItC"))},meta:{back:!0}},{path:"script/:id",component:function(){return n.e(7).then(n.bind(null,"ADSn"))},meta:{back:!0}},{path:"image/:id",component:function(){return n.e(8).then(n.bind(null,"KDo1"))},meta:{back:!0}},{path:"resource/:id",component:function(){return n.e(9).then(n.bind(null,"uLZ+"))},meta:{back:!0}},{path:"create/:type",component:function(){return n.e(10).then(n.bind(null,"Vh8b"))},meta:{back:!0}},{path:"device/:id",component:function(){return n.e(11).then(n.bind(null,"GA/o"))},meta:{back:!0}},{path:"dashboard",name:"dashboard",component:function(){return n.e(12).then(n.bind(null,"7JVJ"))}},{path:"settings",component:function(){return n.e(13).then(n.bind(null,"tB8M"))}},{path:"rules",name:"rules",component:function(){return n.e(14).then(n.bind(null,"DRFT"))}},{path:"test",component:function(){return n.e(15).then(n.bind(null,"yWG4"))}}]},{path:"/login",name:"login",component:function(){return n.e(16).then(n.bind(null,"AT+L"))}},{path:"*",component:function(){return n.e(17).then(n.bind(null,"7l0S"))}}];r["default"].use(Ve["a"]);var je=new Ve["a"]({mode:"hash",base:"/client/",scrollBehavior:function(){return{y:0}},routes:ze}),Fe=je,Be=function(){var e="function"===typeof De?De():De,t="function"===typeof Fe?Fe({store:e}):Fe;e.$router=t;var n={el:"#q-app",router:t,store:e,render:function(e){return e(Ue)}};return{app:n,store:e,router:t}},Ge=n("qSUR"),Je={failed:"Action failed",success:"Action was successful"},Me={en:Je},Ne=function(e){var t=e.app,n=e.Vue;n.use(Ge["a"]),t.i18n=new Ge["a"]({locale:"en",fallbackLocale:"en",messages:Me})},He=n("vDqi"),Ye=n.n(He),$e=function(e){var t=e.Vue;t.prototype.$axios=Ye.a,window.axios=Ye.a},_e=(n("yt8O"),n("VRzm"),n("pIFo"),n("91GP"),n("KKXr"),n("EJPv")),Ke=n("Qyje"),We=n.n(Ke),Xe=36e5,Ze={VERSION:"1.0.0"},et=_e["a"].utils.getParameterByName;Ze.kioskMode="1"===et("kiosk");var tt=function(e){var t=e.app,n=e.router,a=e.Vue,o=e.store;Le.a.on("Notified",function(e){console.log(e),he["a"].create({type:"info",message:e.data.message,detail:e.data.subject,position:"bottom-right",timeout:15e3,actions:[{label:"Close",handler:function(){}}]})});var r=null,i=!1,u=window.location.href,c=u.split("/");r=c[0]+"//"+c[2],r&&(Le.a.config.serverUrl=r),i||(Ze.autoLogin=/\/\/localhost/.test(Le.a.config.serverUrl)),a.prototype.$ui=window.UI=Ze,Object.assign(Ze,{dynamicServerUrl:i,getServerUrl:function(){return Le.a.config.serverUrl},setServerUrl:function(e){ge["a"].set("ething.server.url",e),Le.a.config.serverUrl=e},needAuth:function(){return i&&!ge["a"].get.item("ething.server.url")}}),t.data=t.data||{},t.data.state="begin",t.data.error=!1,Object.assign(Ze,{reset:function(){t.data.state="begin",SSE.stop(),ge["a"].remove("ething.auth.iat"),this.authRefreshTimer&&clearInterval(this.authRefreshTimer)},disconnect:function(){this.reset(),n.app.$router.push({name:"login",query:{redirect_uri:n.app.$router.currentRoute.path}})},logout:function(){var e=this;return Le.a.axios.request({method:"get",url:Le.a.config.serverUrl+"/auth/logout"}).finally(function(){e.disconnect()})},login:function(e,t,a){var o=this;return Le.a.axios.request({method:"post",url:e+"/auth/password",headers:{"content-type":"application/x-www-form-urlencoded"},data:We.a.stringify({login:t,password:a})}).then(function(t){o.reset(),o.setServerUrl(e),ge["a"].set("ething.auth.iat",Date.now());var a=n.app.$route.query.redirect_uri||"/";"/login"===a&&(a="/"),n.app.$router.replace(a)})},authRefreshTimer:null,authRefresh:function(){return Le.a.axios.request({method:"post",url:Le.a.config.serverUrl+"/auth/refresh"}).then(function(){ge["a"].set("ething.auth.iat",Date.now())})}}),console.log("ething configuring ..."),Le.a.axios.defaults.withCredentials=!0,Le.a.axios.interceptors.response.use(function(e){return e},function(e){if(e.response){var t=e.response.status;401!=t&&403!=t||Ze.disconnect()}return Promise.reject(e)}),n.beforeEach(function(e,n,r){if("begin"===t.data.state&&"login"!==e.name){if(console.log("begin..."),Ze.needAuth())return console.warn("no serverUrl found ! need to create a new session"),void r({name:"login",replace:!0,query:{redirect_uri:e.path}});t.data.state="initializing",console.log("initializing...");var i=t.router.app;window.app=i,window.quasar=i.$q,window.Vue=a;var u=_e["a"].loadMeta(),c=Le.a.arbo.load(null,!0).then(function(){console.log("ething arbo loaded !"),o.commit("ething/update")});Promise.all([c,u]).then(function(){t.data.state="ok",console.log("ething loaded !");var e=!1,n=null;_e["a"].SSE.on("connected",function(){n&&n(),e&&(Le.a.arbo.load(null,!0).then(function(){console.log("ething arbo reloaded !"),o.commit("ething/update")}),n=he["a"].create({type:"positive",color:"positive",message:"Reconnected to server !",icon:"thumb_up",position:"top-right",onDismiss:function(){n=null}}))}),_e["a"].SSE.on("disconnected",function(){e=!0,n&&n(),n=he["a"].create({type:"negative",color:"negative",message:"Lost connection to server !",icon:"report_problem",position:"top-right",timeout:0,onDismiss:function(){n=null}})}),_e["a"].SSE.start();var a=ge["a"].get.item("ething.auth.iat");a&&Date.now()-a>Xe&&Ze.authRefresh(),Ze.authRefreshTimer=setInterval(function(){Ze.authRefresh()},Xe)}).catch(function(e){console.error(e),t.data.state="error",t.data.error=e})}r()})},nt=function(e){e.app;var t=e.router,n=e.Vue,a=e.store;n.use(_e["a"],{router:t,store:a})},at=Be(),ot=at.app,rt=at.store,it=at.router;[Ne,$e,tt,nt].forEach(function(e){e({app:ot,router:it,store:rt,Vue:r["default"],ssrContext:null})}),new r["default"](ot)},"MS+v":function(e,t){},fm0S:function(e,t,n){}},[[0,19,18]]]);