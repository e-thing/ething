(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["70bb30e5"],{"180f":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{},[s("div",{staticClass:"bg-white",class:t.$q.screen.lt.md?"q-py-sm":"q-py-lg q-px-md",staticStyle:{"border-bottom":"5px solid #eee"}},[s("q-list",{attrs:{dense:""}},[s("q-item",[s("q-item-section",{attrs:{avatar:"",top:""}},[s("q-avatar",{attrs:{icon:t.meta.icon,"text-color":"white",color:t.meta.color}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-h4 ellipsis",class:"text-"+t.meta.color},[t._v("\n            "+t._s(t.resource.basename())+"\n            "),t.resource.connected()?t._e():s("q-icon",{attrs:{right:"",name:"mdi-lan-disconnect",color:"warning"}}),t._l(t.extendsIcons,function(e,i){return s("q-avatar",{key:i,staticClass:"gt-xs q-mr-xs",attrs:{icon:e,color:t.meta.color,"text-color":"white",size:"24px"}})})],2),s("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.meta.title))])],1),s("q-item-section",{attrs:{side:"",top:""}},[s("q-btn",{attrs:{flat:"",label:t.$q.screen.lt.md?"":"settings",color:"faded",icon:"settings"},on:{click:function(e){t.$router.push("/resource/"+t.resource.id())}}})],1)],1),t.createdBys.length?s("q-item",{attrs:{"inset-level":1}},[s("q-item-section",[s("div",[t._l(t.createdBys,function(e,i){return[s("q-icon",{attrs:{name:"mdi-chevron-right"}}),s("span",{staticClass:"createdby-item",on:{click:function(s){return t.$ethingUI.open(e)}}},[t._v(t._s(e.basename()))])]})],2)])],1):t._e(),s("q-item",{attrs:{"inset-level":1}},[s("q-item-section",[s("div",[s("q-chip",{staticClass:"q-ma-none q-mr-sm",attrs:{dense:"",square:"",icon:"access_time"}},[t._v("\n              "+t._s(t.$ethingUI.utils.dateToString(t.resource.lastSeenDate(),"never"))+"\n            ")]),s("resource-battery-chip",{staticClass:"vertical-middle q-ma-none q-mr-sm",attrs:{resource:t.resource,square:""}}),t.resource.location()?s("q-chip",{staticClass:"q-ma-none q-mr-sm",attrs:{dense:"",square:"",icon:"location_on"}},[t._v("\n              "+t._s(t.resource.location())+"\n            ")]):t._e()],1)])],1)],1)],1),s("div",{staticClass:"page page-width-md"},[t.resource.attr("error")?s("div",{staticClass:"page-block"},[s("q-banner",{staticClass:"bg-negative text-white"},[s("q-icon",{attrs:{left:"",name:"mdi-alert"}}),t._v(" "+t._s(t.resource.attr("error")))],1)],1):t._e(),t.resource.connected()?t._e():s("div",{staticClass:"page-block"},[s("q-banner",{staticClass:"bg-warning text-white"},[s("q-icon",{attrs:{left:"",name:"mdi-lan-disconnect"}}),t._v(" This device is disconnected !")],1)],1),t.resource.description()?s("div",{staticClass:"page-block q-pa-md text-faded"},[t._v("\n      "+t._s(t.resource.description())+"\n    ")]):t._e(),t._l(t.widgets,function(e,i){return t.widgets?s("div",{key:i,staticClass:"page-block"},[e.title?s("div",{staticClass:"bloc-title"},[e.icon?s("q-icon",{attrs:{name:e.icon}}):t._e(),s("span",[t._v(t._s(e.title))])],1):t._e(),s("div",{staticClass:"bloc-content",class:e.devicePage.padding?"":"bloc-content-no-padding"},[s("widget",t._b({attrs:{resource:t.resource,component:e.component,title:"",footer:"",minHeight:e.minHeight,minWidth:e.minWidth,color:"#027be3"}},"widget",e.attributes,!1))],1)]):t._e()}),s("div",{staticClass:"page-block"},[s("div",{staticClass:"bloc-title"},[s("q-icon",{attrs:{name:"mdi-bell"}}),s("span",[t._v("Activity")])],1),s("div",{staticClass:"bloc-content",staticStyle:{"max-height":"400px",overflow:"auto"}},[s("resource-activity",{attrs:{source:t.activitySource}})],1)]),s("div",{staticClass:"page-block attributes"},[s("div",{staticClass:"bloc-title"},[s("q-icon",{attrs:{name:"mdi-format-list-bulleted"}}),s("span",[t._v("Attributes")]),s("q-btn",{staticClass:"float-right",staticStyle:{"line-height":"initial"},attrs:{flat:"",rounded:"",size:"small",label:t.showDetailledAttributes?"less":"more",icon:t.showDetailledAttributes?"expand_less":"expand_more"},on:{click:function(e){t.showDetailledAttributes=!t.showDetailledAttributes}}})],1),s("div",{staticClass:"bloc-content"},[t.attributes.length>0?s("div",{staticClass:"row"},[t._l(t.attributes,function(e){return[s("div",{staticClass:"col-xs-12 col-sm-2 key text-secondary ellipsis"},[t._v(t._s(e.name))]),s("div",{staticClass:"col-xs-12 col-sm-10 value text-faded ellipsis"},[t._v(t._s(e.value))])]})],2):s("div",{staticClass:"text-center text-faded"},[s("small",[t._v("no attributes")])])])]),t.data?s("div",{staticClass:"page-block"},[s("div",{staticClass:"bloc-title"},[s("q-icon",{attrs:{name:"mdi-format-list-bulleted"}}),s("span",[t._v("Data")])],1),s("div",{staticClass:"bloc-content"},[s("div",{staticClass:"row"},[t._l(t.data,function(e,i){return[s("div",{staticClass:"col-xs-12 col-sm-2 key text-secondary"},[t._v(t._s(i))]),s("div",{staticClass:"col-xs-12 col-sm-10 value"},[t._v(t._s(e))])]})],2)])]):t._e(),t.children.length?s("div",{staticClass:"page-block"},[s("div",{staticClass:"bloc-title"},[s("q-icon",{attrs:{name:"mdi-database"}}),s("span",[t._v("Resources")])],1),s("div",{staticClass:"bloc-content bloc-content-no-padding"},[s("q-list",t._l(t.children,function(t){return s("resource-q-item",{key:t.id(),attrs:{resource:t}})}),1)],1)]):t._e(),Object.keys(t.staticMeta.methods).length?s("div",{staticClass:"page-block"},[s("div",{staticClass:"bloc-title"},[s("q-icon",{attrs:{name:"mdi-database"}}),s("span",[t._v("Commands")])],1),s("div",{staticClass:"bloc-content bloc-content-no-padding"},[s("device-api",{attrs:{device:t.resource}})],1)]):t._e()],2)])},a=[],n=(s("7f7f"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("a481"),s("7514"),s("55dd"),s("c09d")),r=s("6659"),c=s("691a"),o=s("9023"),l=s("0de1"),d={name:"PageDevice",components:{DeviceApi:n["a"],ResourceQItem:r["a"],ResourceBatteryChip:c["a"],Widget:o["a"],ResourceActivity:l["a"]},data:function(){return{showDetailledAttributes:!1,widgets:[],_resourceId:null,isSensor:!1,staticMeta:{},extendsIcons:[]}},watch:{resource:{handler:function(t){t&&this._resourceId!=t.id()&&this.load()},immediate:!0}},methods:{load:function(){this._resourceId=this.resource.id(),this.isSensor=this.$ethingUI.isSubclass(this.resource,"interfaces/Sensor");var t=[],e=this.staticMeta=this.$ethingUI.get(this.resource),s=e.widgets;for(var i in s){var a=s[i];-1!==a.in.indexOf("devicePage")&&t.push(a)}t.sort(function(t,e){return e.zIndex-t.zIndex}),this.widgets=t||null;var n=this.resource.type(),r=this.extendsIcons=[],c=this.resource.types();for(var o in c){var l=c[o];if(l!=n&&"interfaces/Sensor"!=l){if("resources/Device"==l)break;var d=this.$ethingUI.getRaw(l);d&&d.icon&&-1===r.indexOf(d.icon)&&d.icon!=e.icon&&r.push(d.icon)}}},deepChildren:function(t,e,s){var i=this;this.$ething.arbo.find(function(a){a.createdBy()===e.id()&&(s&&!s(a)||-1===t.indexOf(a)&&(t.push(a),i.deepChildren(t,a,s)))})}},computed:{resource:function(){var t=this.$route.params.id,e=this.$ething.arbo.get(t);if(!t||!t.length||(e||this.$router.replace("/404"),e.isTypeof("resources/Device")))return e},meta:function(){return this.$ethingUI.get(this.resource)},children:function(){var t=this;return this.$ething.arbo.find(function(e){return e.createdBy()===t.resource.id()})},activitySource:function(){var t=this,e=[this.resource];return this.deepChildren(e,this.resource,function(e){return e instanceof t.$ething.Device}),e},data:function(){var t=this.resource.data();return t&&Object.keys(t).length>0?t:void 0},attributes:function(){var t=this.meta.properties,e=[],s=["name","data","description"],i=["id","modifiedDate","createdBy","type","extends","public","createdDate","methods","battery","location","interfaces","connected","lastSeenDate","error"];for(var a in t)if(-1===s.indexOf(a)){var n=t[a],r=n.getFormatted(this.resource);(this.showDetailledAttributes||-1===i.indexOf(a))&&(null!==r&&"undefined"!==typeof r||(r="-"),e.push({name:a,value:r}))}return e},createdBys:function(){var t=[],e=this.resource.createdBy();while(e){var s=this.$ething.arbo.get(e);if(!s)break;t.push(s),e=s.createdBy()}return t.reverse()}}},u=d,v=(s("45af"),s("2877")),h=Object(v["a"])(u,i,a,!1,null,null,null);e["default"]=h.exports},"45af":function(t,e,s){"use strict";var i=s("8740"),a=s.n(i);a.a},8740:function(t,e,s){}}]);