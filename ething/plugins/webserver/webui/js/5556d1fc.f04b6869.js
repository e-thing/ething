(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["5556d1fc"],{"4a46":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"center-width-md q-gutter-y-md q-py-md q-px-sm"},[s("q-list",{staticStyle:{"margin-left":"-16px","margin-right":"-16px"},attrs:{dense:""}},[s("q-item",[s("q-item-section",{attrs:{avatar:"",top:""}},[s("q-avatar",{attrs:{icon:t.meta.icon,"text-color":"white",color:t.meta.color}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-h4 ellipsis",class:"text-"+t.meta.color},[t._v("\n            "+t._s(t.resource.basename())+"\n            "),t.resource.hasAttr("connected")&&!t.resource.attr("connected")?s("q-icon",{attrs:{right:"",name:"mdi-lan-disconnect",color:"warning"}}):t._e(),t._l(t.extendsIcons,(function(e,i){return s("q-avatar",{key:i,staticClass:"gt-xs q-mr-xs",attrs:{icon:e,color:t.meta.color,"text-color":"white",size:"24px"}})}))],2),s("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.meta.title))])],1),s("q-item-section",{attrs:{side:"",top:""}},[s("q-btn",{attrs:{flat:"",label:t.$q.screen.lt.md?"":"settings",color:"faded",icon:"settings"},on:{click:function(e){return t.openSettings()}}})],1)],1),t.createdBys.length?s("q-item",{attrs:{"inset-level":1}},[s("q-item-section",[s("div",[t._l(t.createdBys,(function(e,i){return[s("q-icon",{attrs:{name:"mdi-chevron-right"}}),s("span",{staticClass:"createdby-item",on:{click:function(s){return t.$ethingUI.open(e)}}},[t._v(t._s(e.basename()))])]}))],2)])],1):t._e()],1),s("div",[t.resource.attr("lastSeenDate")?s("q-chip",{staticClass:"q-ml-none",attrs:{dense:"",square:"",icon:"access_time",outline:"",color:"secondary"}},[t._v("\n      "+t._s(t.$ethingUI.utils.dateToString(t.resource.lastSeenDate(),"never"))+"\n    ")]):t._e(),t._l(t.badges,(function(t,e){return s("dynamic-component",{key:e,staticClass:"q-ml-none",attrs:{component:t}})}))],2),t.resource.attr("error")?s("div",[s("q-banner",{staticClass:"bg-negative text-white"},[s("q-icon",{attrs:{left:"",name:"mdi-alert"}}),t._v(" "+t._s(t.resource.attr("error")))],1)],1):t._e(),t.resource.hasAttr("connected")&&!t.resource.attr("connected")?s("div",[s("q-banner",{staticClass:"bg-warning text-white"},[s("q-icon",{attrs:{left:"",name:"mdi-lan-disconnect"}}),t._v(" This device is disconnected !")],1)],1):t._e(),t.resource.description()?s("div",{staticClass:"text-faded"},[t._v("\n    "+t._s(t.resource.description())+"\n  ")]):t._e(),t._l(t.componentsItems,(function(e,i){return t.componentsItems.length>0?s("div",{key:i},[e.title?s("div",{staticClass:"text-h6 text-grey-8 q-py-md"},[s("q-icon",{attrs:{name:e.icon||"mdi-brightness-1",left:""}}),s("span",[t._v(t._s(e.title))])],1):t._e(),s("div",{staticClass:"bg-white"},[s("dynamic-component",{attrs:{component:e,color:"secondary"}})],1)]):t._e()})),s("div",[s("div",{staticClass:"text-h6 text-grey-8 q-py-md"},[s("q-icon",{attrs:{name:"mdi-bell",left:""}}),s("span",[t._v("Activity")])],1),s("div",{staticClass:"bg-white",staticStyle:{"max-height":"400px",overflow:"auto"}},[s("resource-activity",{attrs:{source:t.activitySource}})],1)]),s("div",{staticClass:"attributes"},[s("div",{staticClass:"text-h6 text-grey-8 q-py-md"},[s("q-icon",{attrs:{name:"mdi-format-list-bulleted",left:""}}),s("span",[t._v("Attributes")]),s("q-btn",{staticClass:"float-right",staticStyle:{"line-height":"initial"},attrs:{flat:"",rounded:"",size:"small",label:t.showDetailledAttributes?"less":"more",icon:t.showDetailledAttributes?"expand_less":"expand_more"},on:{click:function(e){t.showDetailledAttributes=!t.showDetailledAttributes}}})],1),s("div",{staticClass:"bg-white q-pa-md"},[t.attributes.length>0?s("div",{staticClass:"row"},[t._l(t.attributes,(function(e){return[s("div",{staticClass:"col-xs-12 col-sm-2 key text-secondary ellipsis"},[t._v(t._s(e.name))]),s("div",{staticClass:"col-xs-12 col-sm-10 value text-faded ellipsis"},[t._v(t._s(e.value))])]}))],2):s("div",{staticClass:"text-center text-faded"},[s("small",[t._v("no attributes")])])])]),t.children.length?s("div",[s("div",{staticClass:"text-h6 text-grey-8 q-py-md"},[s("q-icon",{attrs:{name:"mdi-database",left:""}}),s("span",[t._v("Resources")])],1),s("div",{staticClass:"bg-white"},[s("q-list",t._l(t.children,(function(t){return s("resource-q-item",{key:t.id(),attrs:{resource:t}})})),1)],1)]):t._e(),Object.keys(t.staticMeta.methods).length?s("div",[s("div",{staticClass:"text-h6 text-grey-8 q-py-md"},[s("q-icon",{attrs:{name:"mdi-console",left:""}}),s("span",[t._v("Commands")])],1),s("div",{staticClass:"bg-white"},[s("device-api",{attrs:{device:t.resource}})],1)]):t._e()],2)},n=[],r=(s("456d"),s("a481"),s("7514"),s("55dd"),s("ac6a"),s("cadf"),s("06db"),s("8615"),{name:"PageResourceMain",data:function(){return{showDetailledAttributes:!1,componentsItems:[],_resourceId:null,isSensor:!1,staticMeta:{},extendsIcons:[]}},watch:{resource:{handler:function(t){t&&this._resourceId!=t.id()&&this.load()},immediate:!0}},methods:{load:function(){this._resourceId=this.resource.id(),this.isSensor=this.$ethingUI.isSubclass(this.resource,"interfaces/Sensor");var t=this.staticMeta=this.$ethingUI.get(this.resource),e=Object.values(t.components).filter((function(t){return!t.disable}));e.sort((function(t,e){return e.zIndex-t.zIndex})),this.componentsItems=e;var s=this.resource.type(),i=this.extendsIcons=[],n=this.resource.types();for(var r in n){var a=n[r];if(a!=s&&"interfaces/Sensor"!=a){if("resources/Resource"==a)break;var c=this.$ethingUI.getRaw(a);c&&c.icon&&-1===i.indexOf(c.icon)&&c.icon!=t.icon&&i.push(c.icon)}}},deepChildren:function(t,e,s){var i=this;this.$ething.arbo.find((function(n){n.createdBy()===e.id()&&(s&&!s(n)||-1===t.indexOf(n)&&(t.push(n),i.deepChildren(t,n,s)))}))},openSettings:function(){this.$router.push({name:"resourceEdit",params:{id:this.resource.id()}})}},computed:{resource:function(){var t=this.$route.params.id,e=this.$ething.arbo.get(t);return t&&t.length&&(e||this.$router.replace("/404")),e},meta:function(){return this.$ethingUI.get(this.resource)},badges:function(){var t=Object.values(this.meta.badges);return t.sort((function(t,e){return e.zIndex-t.zIndex})),t},children:function(){var t=this;return this.$ething.arbo.find((function(e){return e.createdBy()===t.resource.id()}))},activitySource:function(){var t=this,e=[this.resource];return this.deepChildren(e,this.resource,(function(e){return e instanceof t.$ething.Device})),e},data:function(){var t=this.resource.data();return t&&Object.keys(t).length>0?t:void 0},attributes:function(){var t=this.meta.properties,e=[],s=["name","description"],i=["id","modifiedDate","createdBy","type","extends","data","createdDate","methods","battery","location","interfaces","connected","lastSeenDate","error"];for(var n in t)if(-1===s.indexOf(n)){var r=t[n],a=r.getFormatted(this.resource);(this.showDetailledAttributes||-1===i.indexOf(n))&&(null!==a&&"undefined"!==typeof a||(a="-"),e.push({name:n,value:a}))}return e},createdBys:function(){var t=[],e=this.resource.createdBy();while(e){var s=this.$ething.arbo.get(e);if(!s)break;t.push(s),e=s.createdBy()}return t.reverse()}}}),a=r,c=(s("c969"),s("2877")),o=Object(c["a"])(a,i,n,!1,null,null,null);e["default"]=o.exports},c27e:function(t,e,s){},c969:function(t,e,s){"use strict";var i=s("c27e"),n=s.n(i);n.a}}]);